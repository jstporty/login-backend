# MCP 학습 및 테스트 자동화 프로젝트 정리

## 📌 프로젝트 목적

이 프로젝트는 **MCP(Model Context Protocol)를 학습**하고, **AI 기반 테스트 자동화**를 직접 구현해보기 위해 만들었습니다.

단순히 백엔드 API를 만드는 것이 아니라, **AI가 실제로 테스트를 수행하고 결과를 리포팅**하는 전체 파이프라인을 경험하는 것이 목표였습니다.

---

## 🛠️ 사용 기술 스택

### Backend
| 기술 | 버전 | 용도 |
|------|------|------|
| Kotlin | 1.9.x | 백엔드 언어 |
| Spring Boot | 3.x | 웹 프레임워크 |
| Spring Data JPA | - | ORM |
| MySQL | 8.x | 데이터베이스 |
| Gradle (Kotlin DSL) | - | 빌드 도구 |

### Frontend
| 기술 | 버전 | 용도 |
|------|------|------|
| React | 18.x | UI 프레임워크 |
| TypeScript | - | 타입 안정성 |
| Vite | - | 빌드 도구 |
| Axios | - | HTTP 클라이언트 |

### AI & 자동화
| 기술 | 용도 |
|------|------|
| **MCP (Model Context Protocol)** | AI-도구 연결 프로토콜 |
| **Cursor IDE** | AI 코딩 어시스턴트 |
| **Claude** | AI 모델 |
| **Node.js** | 커스텀 MCP 서버 |
| **ExcelJS** | 엑셀 리포트 생성 |

---

## 🤖 MCP (Model Context Protocol)란?

**MCP**는 AI 모델이 외부 도구(Tool)와 상호작용할 수 있게 해주는 프로토콜입니다.

```
[AI 모델 (Claude)] <--MCP--> [MCP 서버] <---> [외부 도구/시스템]
```

### 왜 MCP를 사용했나?

기존에는 AI에게 "테스트 해줘"라고 하면 **코드만 생성**해주고 끝이었습니다.

MCP를 사용하면 AI가 직접:
- 파일을 읽고 쓰기
- 브라우저를 조작
- API를 호출
- 데이터베이스 조작
- 엑셀 리포트 생성

까지 **실제로 수행**할 수 있습니다.

---

## 📦 사용한 MCP 서버 목록

### 1. filesystem (파일 시스템)
```json
{
  "command": "npx",
  "args": ["-y", "@modelcontextprotocol/server-filesystem", "/Users/..."]
}
```
- **용도**: 파일 읽기/쓰기, 디렉토리 탐색
- **활용**: 엑셀 파일 저장, 설정 파일 읽기

### 2. browser-extension (브라우저 자동화)
```json
{
  "command": "cursor-browser-extension"
}
```
- **용도**: Chrome 브라우저 제어
- **활용**: 회원가입/로그인 폼 자동 입력, 버튼 클릭, 결과 확인

### 3. excel-reader (커스텀 MCP)
```javascript
// 직접 개발한 MCP 서버
name: "excel-reader"
tool: "read_excel_file"
```
- **용도**: 엑셀(.xlsx) 파일 읽기
- **활용**: 테스트 케이스 로드

### 4. global-tester (커스텀 MCP)
```javascript
// 직접 개발한 MCP 서버
name: "global-tester-v3"
tool: "run_auth_test_suite"
```
- **용도**: API 테스트 실행 + 엑셀 리포트 생성
- **활용**: 전체 E2E 테스트 자동화

---

## 🎯 AI를 활용한 방식

### 1. 코드 생성이 아닌 "실행"
```
기존: AI가 테스트 코드를 생성 → 개발자가 직접 실행
현재: AI가 테스트를 직접 실행 → 결과 리포트까지 자동 생성
```

### 2. 자연어 명령으로 테스트 수행
```
사용자: "전체 E2E 테스트 실행해줘"

AI 동작:
1. DB 초기화 (mysql 명령)
2. 엑셀에서 테스트 케이스 읽기 (excel-reader MCP)
3. 브라우저 띄워서 10개 테스트 순차 실행 (browser-extension MCP)
4. API 테스트 실행 (global-tester MCP)
5. 결과 엑셀 리포트 생성
6. 최종 요약 출력
```

### 3. 프론트엔드 + 백엔드 동시 검증
- **프론트엔드**: 브라우저에서 validation 에러 캡처
- **백엔드**: API 응답 상태 코드 및 에러 메시지 확인
- **불일치 발견**: 프론트가 백엔드보다 더 엄격한 validation 적용 중 (예: 비밀번호 숫자만)

---

## 📊 테스트 자동화 흐름

```
┌─────────────────────────────────────────────────────────────┐
│                    테스트 자동화 파이프라인                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│  │  엑셀    │───▶│  AI가    │───▶│  브라우저 │              │
│  │ 테스트   │    │  읽기    │    │  자동화   │              │
│  │ 케이스   │    │          │    │  실행    │              │
│  └──────────┘    └──────────┘    └──────────┘              │
│                                        │                    │
│                                        ▼                    │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐              │
│  │  최종    │◀───│  엑셀    │◀───│  결과    │              │
│  │  요약    │    │  리포트  │    │  수집    │              │
│  │  출력    │    │  생성    │    │          │              │
│  └──────────┘    └──────────┘    └──────────┘              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 📁 프로젝트 구조

```
login-backend/
├── src/main/kotlin/          # Kotlin 백엔드 코드
├── mcp-servers/              # 프로젝트용 MCP 서버 (deprecated)
└── docs/                     # 문서들

~/.cursor/
├── mcp.json                  # MCP 서버 설정 (전역)
└── mcp-servers/              # 커스텀 MCP 서버들 (전역)
    ├── index.js              # global-tester MCP
    ├── excel-reader.js       # excel-reader MCP
    ├── browser-report.js     # 브라우저 테스트 리포트 생성
    └── package.json

login-frontend/               # React 프론트엔드 (별도 레포)
```

---

## 💡 배운 점

### 1. MCP의 강력함
- AI가 단순 코드 생성을 넘어 **실제 시스템과 상호작용** 가능
- 자연어 명령만으로 복잡한 테스트 시나리오 수행

### 2. 커스텀 MCP 서버 개발
- Node.js + `@modelcontextprotocol/sdk`로 쉽게 개발 가능
- 프로젝트 특화된 도구를 AI에게 제공

### 3. E2E 테스트의 한계와 가능성
- **한계**: 브라우저 자동화는 느림 (10개 테스트에 2~3분)
- **가능성**: API 테스트는 빠름 (10개 테스트에 2~3초)
- **결론**: 일상적 테스트는 API 테스트, 시연/데모는 브라우저 테스트

### 4. 프론트/백엔드 Validation 불일치 발견
- 테스트 자동화를 통해 **숨겨진 버그** 발견
- 예: 비밀번호 `12345678` → 백엔드 통과, 프론트엔드 실패

---

## 🚀 향후 개선 방향

1. **병렬 테스트 실행**: 브라우저 테스트 속도 개선
2. **CI/CD 연동**: GitHub Actions에서 MCP 테스트 실행
3. **더 많은 테스트 케이스**: 엣지 케이스, 부하 테스트
4. **시각화 대시보드**: 테스트 결과를 웹으로 확인

---

## 📝 사용 명령어 (프롬프트)

### 전체 E2E 테스트 실행
```
login-backend 프로젝트 전체 E2E 테스트를 실행해줘.
- DB 초기화
- 엑셀에서 테스트 케이스 읽기
- 브라우저에서 전체 테스트 실행
- 결과 엑셀 저장
```

### API 테스트만 빠르게 실행
```
global-tester MCP로 API 테스트만 실행해줘
```

---

## 📚 참고 자료

- [MCP 공식 문서](https://modelcontextprotocol.io/)
- [Cursor IDE](https://cursor.sh/)
- [ExcelJS](https://github.com/exceljs/exceljs)

---

**작성일**: 2026-01-08  
**작성자**: MCP 학습 프로젝트
